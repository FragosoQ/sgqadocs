<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Busca Google Drive</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #121212;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  input, button {
    padding: 10px;
    margin: 5px;
    font-size: 16px;
  }
  button {
    cursor: pointer;
    background-color: #1a73e8;
    border: none;
    color: white;
    border-radius: 4px;
  }
  ul {
    list-style: none;
    padding: 0;
  }
  li {
    margin: 10px 0;
    background: #1e1e1e;
    padding: 10px;
    border-radius: 5px;
  }
  a {
    color: #1a73e8;
    text-decoration: none;
  }
</style>
</head>
<body>

<h1>Pesquisar arquivos no Google Drive</h1>
<input type="text" id="query" placeholder="Digite a pesquisa">
<button onclick="searchFiles()">Pesquisar</button>

<ul id="results"></ul>

<script>
  const webhookUrl = "https://bangui.app.n8n.cloud/webhook/9e084fd5-0998-411e-8e95-311e4e5690f4";

  async function searchFiles() {
    const query = document.getElementById('query').value;
    if(!query) return alert('Digite algo para pesquisar.');

    const resultsList = document.getElementById('results');
    resultsList.innerHTML = 'Carregando...';

    try {
      const response = await fetch(webhookUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ chatInput: query })
      });

      const data = await response.json();

      if(!data || data.length === 0) {
        resultsList.innerHTML = '<li>Nenhum arquivo encontrado.</li>';
        return;
      }

      resultsList.innerHTML = '';
      data.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${item.json.name}</strong><br>
                        <a href="${item.json.link}" target="_blank">Abrir Arquivo</a><br>
                        ${item.json.folderLinkClickable || ''}`;
        resultsList.appendChild(li);
      });

    } catch (error) {
      resultsList.innerHTML = '<li>Erro ao buscar arquivos.</li>';
      console.error(error);
    }
  }
</script>

</body>
</html>
